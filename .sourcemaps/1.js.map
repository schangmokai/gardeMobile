{"version":3,"sources":["../../src/pages/trackingpolice/trackingpolice.module.ts","../../src/pages/trackingpolice/trackingpolice.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {TrackingpolicePage} from './trackingpolice';\n//import { LocalNotifications } from '@ionic-native/local-notifications';\n\n\n@NgModule({\n  declarations: [\n    TrackingpolicePage\n  ],\n  imports: [\n    IonicPageModule.forChild(TrackingpolicePage)\n  ],\n  providers: [\n   // LocalNotifications\n  ]\n})\nexport class HomePageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/trackingpolice/trackingpolice.module.ts","import {Component} from '@angular/core';\nimport {IonicPage} from 'ionic-angular';\nimport {NavController, NavParams} from 'ionic-angular';\nimport { TrackingpoliceService } from '../../services/trackingpolice-service';\nimport { maconfig } from '../../configs/configs';\ndeclare var google: any;\nimport * as io from 'socket.io-client';\n\n\n/*\n Generated class for the HomePage page.\n\n See http://ionicframework.com/docs/v2/components/#navigation for more info on\n Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n  selector: 'page-trackingpolice',\n  templateUrl: 'trackingpolice.html'\n})\nexport class TrackingpolicePage {\n  // map id\n  public mapId = Math.random() + 'map';\n\n  // map height\n  public mapHeight: number = 480;\n\n  // show - hide booking form\n  public showForm: boolean = false;\n\n  // show - hide modal bg\n  public showModalBg: boolean = false;\n\n  public listesutilisateurs : any;\n\n  public myid: any;\n\n  public status: any;\n\n  public myPosition = null;\n\n  public lat : any;\n  public lon : any;\n\n  // list vehicles\n\n  public hometest:any;\n\n  public vehicles: any = [\n    {\n      name: 'Taxi',\n      icon: 'icon-taxi',\n      active: true\n    },\n    {\n      name: 'SUV',\n      icon: 'icon-car',\n      active: false\n    },\n    {\n      name: 'Car',\n      icon: 'icon-sedan',\n      active: false\n    }\n  ]\n\n  public records: any = [\n    {\n      id: 1,\n      from: 'Royal City',\n      to: 'Vietnam - France hospital',\n      time: '2016-01-02'\n    },\n    {\n      id: 2,\n      from: 'BigC',\n      to: 'Phao Dai Lang',\n      time: '2015-12-11'\n    },\n    {\n      id: 3,\n      from: 'Royal City',\n      to: '784 Lang',\n      time: '2015-11-10'\n    },\n    {\n      id: 4,\n      from: 'Royal City',\n      to: 'Vietnam - France hospital',\n      time: '2015-11-10'\n    }\n  ];\n\n  // Note to driver\n  public note: any;\n\n  // Promo code\n  public promo: any;\n\n  // Map\n  public map: any;\n  public task: any;\n  public vcontrol: any;\n  socket:any;\n  public listesutilisateursEnDangers: any;\n  public userdangers: any;\n\n  constructor(public nav: NavController,  public navParams: NavParams, public trackingpoliceService: TrackingpoliceService) {\n     this.myid = this.navParams.get('id');\n     this.status = this.navParams.get('status');\n     this.userdangers = this.navParams.get('userdangers');\n     console.log(this.userdangers);\n     this.hometest = 1;     \n     this.chargementDeDonne();\n     this.socket = io(maconfig.socketadresse);\n\n     this.socket.on('alert', (msg) => {\n        if(msg.id_emetteur == this.userdangers.id){\n            this.lat = this.lat + 0.1;\n            this.lon = this.lon + 0.2;\n        }\n     });\n\n     /*this.task = setInterval((function () {\n           this.lat = this.lat + 0.1;\n           this.lon = this.lon + 0.2;\n     }).bind(this), 300);*/\n     \n  }\n\n  ionViewDidLoad() {\n    // init map\n    this.initializeMap();\n  }\n\n  // toggle form\n \n  chargementDeDonne(){\n    this.trackingpoliceService.fingUserEnDanger().then( (resp) =>{\n        this.listesutilisateursEnDangers = resp;\n      }).catch( (error) =>{    \n         console.log()\n     });\n  }\n\n\n  selection(){\n     this.hometest = 1;\n     this.vcontrol = 1;\n     this.initializeMap();\n  }\n\n\n  \n  allezchater(){\n    this.nav.setRoot('ChatPage');\n  }\n\n\n  // toggle active vehicle\n  toggleVehicle(index) {\n    for (var i = 0; i < this.vehicles.length; i++) {\n      this.vehicles[i].active = (i == index);\n    }\n  }\n\n  initializeMap() {\n\n    this.lat = 3.8480325;\n    this.lon = 11.502075200000002;\n\n    let latLng = new google.maps.LatLng(3.8480325 , 11.502075200000002);\n    let mapOptions = {\n      center: latLng,\n      zoom: 8,\n      mapTypeId: google.maps.MapTypeId.ROADMAP,\n      mapTypeControl: false,\n      zoomControl: false,\n      streetViewControl: false\n    }\n\n    this.map = new google.maps.Map(document.getElementById(this.mapId), mapOptions);\n\n    // get ion-view height\n    var viewHeight = window.screen.height - 44; // minus nav bar\n    // get info block height\n    var infoHeight = document.getElementsByClassName('booking-info')[0].scrollHeight;\n    // get booking form height\n    var bookingHeight = document.getElementsByClassName('booking-form')[0].scrollHeight;\n\n    // set map height = view height - info block height + booking form height\n    this.mapHeight = viewHeight - infoHeight + bookingHeight;\n\n\n    // refresh map\n    setTimeout(() => {\n      google.maps.event.trigger(this.map, 'resize');\n    }, 300);\n\n    \n    // use GPS to get center position\n\n    this.task = setInterval((function () {\n      \n        /*console.log(\"le mokai\");\n        lat = lat + 0.1;\n        lon = lon + 0.2;*/\n        /*navigator.geolocation.getCurrentPosition(\n        (position) => {*/\n\n          let newLatLng = new google.maps.LatLng(this.lat, this.lon);\n          this.map.setCenter(newLatLng);\n          if(this.myPosition == null){\n            this.myPosition = \n            new google.maps.Marker({\n              map: this.map,\n              animation: google.maps.Animation.DROP,\n              position: this.map.getCenter()\n            });\n          }else{\n            this.myPosition.setPosition(newLatLng);\n          }\n       /* },\n        (error) => {\n          console.log(error);\n        },\n        options\n       );*/\n\n    }).bind(this), 300);\n    \n  }\n\n  \n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/trackingpolice/trackingpolice.ts"],"sourceRoot":""}