{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {LoginPage} from './login';\nimport { TranslateModule } from 'ng2-translate';\n\n\n@NgModule({\n  declarations: [\n    LoginPage\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n    TranslateModule\n  ],\n  providers: [\n   // LocalNotifications\n  ]\n})\nexport class LoginPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\nimport {IonicPage} from 'ionic-angular';\nimport { NavController, LoadingController, AlertController, ToastController } from 'ionic-angular';\nimport {Http, Headers, RequestOptions } from '@angular/http';\nimport { maconfig } from '../../configs/configs';\nimport { UserConnecteService } from '../../services/userConnecte-service';\nimport {TranslateService} from \"ng2-translate/src/translate.service\";\n\n/*\n  Generated class for the LoginPage page.\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n  Ionic pages and navigation.\n*/\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html'\n})\nexport class LoginPage {\n\n    utilisateur = {};\n\n    constructor(public nav: NavController, public translate:TranslateService,public http: Http, public toastCtrl:ToastController, public loadingCtrl: LoadingController, private alertCtrl: AlertController, private userconnecteService: UserConnecteService) {\n      this.http = http;\n      /*this.http.get('http://localhost:8085/api/chauffeurs/listes').subscribe(data => {\n          console.log(data['_body']);\n       }, error => {\n            console.log(error);\n       });*/\n    }\n\n    signup() {\n      this.nav.setRoot('RegisterPage');\n    }\n\n    login(utilisateur) {\n\n        let headers = new Headers();\n        headers.append('Accept', 'application/json');\n        headers.append('Content-Type', 'application/json');\n        let options = new RequestOptions({headers: headers});\n        \n        let body = {\n           login: utilisateur.username, \n           password: utilisateur.password\n        };\n\n        let loading = this.loadingCtrl.create({content: \"Loggin in, please wait ...\"});\n        loading.present();\n\n        this.http.post(maconfig.logins, body, options)\n          .subscribe(data => {\n            loading.dismissAll();\n            var result = data.json();\n             if(result.code == \"400\"){\n              this.userconnecteService.storeSession(result).then(()=>{\n                this.userconnecteService.setParameterUser(result.id,result.status,5);\n                if(result.status==1){\n                  this.nav.setRoot('HomePage',{\n                    id: result.id,\n                    status: result.status\n                  });\n                  //dans le cas contraire in s'agit d'un policier qui lui iras voir la liste des personne en dang√©\n                }else{\n                  this.nav.setRoot('UserdangersPage',{\n                    id: result.id,\n                    status: result.status\n                  });\n                }\n              });\n             }else{\n              // dans le cas ou le login ou le password est incorrect\n              this.translate.get(['error','login ou mot passord incorrect', 'OK']).subscribe((langs:Array<string>) => {\n                this.toastCtrl.create({\n                  message: langs['login ou mot passord incorrect'],\n                  duration: 3000,\n                  position: 'bottom',\n                  showCloseButton: true,\n                  closeButtonText: langs['OK'],\n                }).present();\n                /*\n                let alert = this.alertCtrl.create({\n                  title:langs['error'],\n                  subTitle: langs['login ou mot passord incorrect'],\n                  buttons: [langs['OK']]\n                });\n                alert.present();*/\n              });\n            }\n          }, error => {\n            loading.dismissAll();\n            this.translate.get(['No connection', 'OK']).subscribe((langs:Array<string>) => {\n                this.toastCtrl.create({\n                  message: langs['No connection'],\n                  duration: 3000,\n                  position: 'bottom',\n                  showCloseButton: true,\n                  closeButtonText: langs['OK'],\n                }).present();\n            });   \n          });\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}