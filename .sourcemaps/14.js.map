{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {LoginPage} from './login';\nimport { TranslateModule } from 'ng2-translate';\n\n\n@NgModule({\n  declarations: [\n    LoginPage\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n    TranslateModule\n  ],\n  providers: [\n   // LocalNotifications\n  ]\n})\nexport class LoginPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\nimport {IonicPage} from 'ionic-angular';\nimport { NavController, LoadingController, AlertController, ToastController } from 'ionic-angular';\nimport {Http, Headers, RequestOptions } from '@angular/http';\nimport { maconfig } from '../../configs/configs';\nimport { UserConnecteService } from '../../services/userConnecte-service';\nimport {TranslateService} from \"ng2-translate/src/translate.service\";\n\n/*\n  Generated class for the LoginPage page.\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n  Ionic pages and navigation.\n*/\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html'\n})\nexport class LoginPage {\n\n    utilisateur = {};\n\n    constructor(public nav: NavController, public translate:TranslateService,public http: Http, public toastCtrl:ToastController, public loadingCtrl: LoadingController, private alertCtrl: AlertController, private userconnecteService: UserConnecteService) {\n      this.http = http;\n      /*this.http.get('http://localhost:8085/api/chauffeurs/listes').subscribe(data => {\n          console.log(data['_body']);\n       }, error => {\n            console.log(error);\n       });*/\n    }\n\n    signup() {\n      this.nav.setRoot('RegisterPage');\n    }\n\n    login(utilisateur) {\n\n        let headers = new Headers();\n        headers.append('Accept', 'application/json');\n        headers.append('Content-Type', 'application/json');\n        let options = new RequestOptions({headers: headers});\n        \n        let body = {\n           login: utilisateur.username, \n           password: utilisateur.password\n        };\n\n        let loading = this.loadingCtrl.create({content: \"Loggin in, please wait ...\"});\n        loading.present();\n\n        this.http.post(maconfig.logins, body, options)\n          .subscribe(data => {\n            var result = data.json();\n             if(result.code == \"400\"){\n\n                   //this.nav.setRoot('OuestilPage');\n                   // si après le login il s'agis d'un utilisateur simple alors il est redirigé vers home page ou il pourras pouras \n                   // librement scanner le code d'un taxis pour assurer sa sécurité\n                   \n                   this.userconnecteService.setParameterUser(result.id,result.status,5);\n                   \n                   if(result.status==1){\n\n                     this.nav.setRoot('HomePage',{\n                        id: result.id,\n                        status: result.status\n                     });\n                     \n                 // dans le cas contraire in s'agit d'un policier qui lui iras voir la liste des personne en dangé\n                    }else{\n\n                       this.nav.setRoot('UserdangersPage',{\n                        id: result.id,\n                        status: result.status\n                       });\n                       \n                    }\n                   loading.dismissAll();\n\n             }else{\n                 // dans le cas ou le login ou le password est incorrect\n                 this.translate.get(['error','login ou mot passord incorrect', 'OK']).subscribe((langs:Array<string>) => {\n                  let alert = this.alertCtrl.create({\n                    title:langs['error'],\n                    subTitle: langs['login ou mot passord incorrect'],\n                    buttons: [langs['OK']]\n                  });\n\n                  alert.present();\n\n                  this.nav.setRoot(LoginPage);\n                  loading.dismissAll();\n                });\n             }\n          }, error => {\n            loading.dismissAll();\n            this.translate.get(['No connection']).subscribe((langs:Array<string>) => {\n                let toast = this.toastCtrl.create({\n                  message: langs['No connection'],\n                    duration: 3000,\n                    position: 'bottom'\n                });\n                toast.present();\n            });   \n          });\n    }\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}