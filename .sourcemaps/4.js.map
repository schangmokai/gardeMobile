{"version":3,"sources":["../../src/pages/tracking/tracking.module.ts","../../src/pages/tracking/tracking.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {TrackingPage} from './tracking';\nimport { TranslateModule } from 'ng2-translate';\n\n@NgModule({\n  declarations: [\n    TrackingPage\n  ],\n  imports: [\n    IonicPageModule.forChild(TrackingPage),\n    TranslateModule\n  ],\n  providers: [\n   // LocalNotifications\n  ]\n})\nexport class TrackingPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tracking/tracking.module.ts","import { Component } from '@angular/core';\nimport {IonicPage} from 'ionic-angular';\nimport { NavController, Platform, AlertController } from 'ionic-angular';\nimport { DriverService } from '../../services/driver-service';\ndeclare var google: any;\n\n/*\n  Generated class for the TrackingPage page.\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n  Ionic pages and navigation.\n*/\n@IonicPage()\n@Component({\n  selector: 'page-tracking',\n  templateUrl: 'tracking.html'\n})\nexport class TrackingPage {\n  // map height\n  public mapHeight:number = 480;\n\n  // driver info\n  public driver:any;\n\n  // map\n  public map:any;\n\n  constructor(public nav: NavController, public driverService:DriverService, public platform:Platform,\n              public alertCtrl: AlertController) {\n    // get driver info\n    this.driver = driverService.getItem(1);\n    // show rating popup\n    setTimeout(() => {\n      this.showRating();\n    }, 3000);\n  }\n\n  ionViewDidLoad() {\n    // init map\n    this.initializeMap();\n  }\n\n  initializeMap() {\n    let latLng = new google.maps.LatLng(21.0318202, 105.8495298);\n\n    let mapOptions = {\n      center: latLng,\n      zoom: 16,\n      mapTypeId: google.maps.MapTypeId.ROADMAP,\n      mapTypeControl: false,\n      zoomControl: false,\n      streetViewControl: false\n    }\n\n    this.map = new google.maps.Map(document.getElementById(\"map\"), mapOptions);\n\n    // get ion-view height\n    var viewHeight = window.screen.height - 44; // minus nav bar\n    // get info block height\n    var infoHeight = document.getElementsByClassName('tracking-info')[0].scrollHeight;\n\n    this.mapHeight = viewHeight - infoHeight;\n\n    let options = {timeout: 120000, enableHighAccuracy: true};\n\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        let newLatLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);\n        this.map.setCenter(newLatLng);\n        new google.maps.Marker({\n          map: this.map,\n          animation: google.maps.Animation.DROP,\n          position: this.map.getCenter()\n        });\n      },\n\n      (error) => {\n        console.log(error);\n      }, options\n    );\n\n    // refresh map\n    setTimeout(() => {\n      google.maps.event.trigger(this.map, 'resize');\n    }, 300);\n  }\n\n  // show rating popup\n  showRating() {\n    let prompt = this.alertCtrl.create({\n      title: 'Thank you',\n      message: 'We hope you have enjoyed your ride, For comments, compliments or enquiries, please write to us below',\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: data => {\n            console.log('Cancel clicked');\n            this.nav.setRoot('HomePage');\n          }\n        },\n        {\n          text: 'Submit',\n          handler: data => {\n            console.log('Saved clicked');\n            this.nav.setRoot('HomePage');\n          }\n        }\n      ]\n    })\n\n    prompt.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tracking/tracking.ts"],"sourceRoot":""}