{"version":3,"sources":["../../src/pages/userdangers/userdangers.module.ts","../../src/pages/userdangers/userdangers.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import {NgModule} from '@angular/core';\r\nimport {IonicPageModule} from 'ionic-angular';\r\nimport {UserdangersPage} from './userdangers';\r\n//import { LocalNotifications } from '@ionic-native/local-notifications';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    UserdangersPage\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(UserdangersPage)\r\n  ],\r\n  providers: [\r\n   // LocalNotifications\r\n  ]\r\n})\r\nexport class HomePageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/userdangers/userdangers.module.ts","import {Component} from '@angular/core';\nimport {IonicPage} from 'ionic-angular';\nimport {NavController, NavParams, AlertController} from 'ionic-angular';\nimport { TrackingpoliceService } from '../../services/trackingpolice-service';\nimport * as io from 'socket.io-client';\nimport { HomeService } from '../../services/home-service';\nimport { maconfig } from '../../configs/configs';\ndeclare var google: any;\n\n\n\n/*\n Generated class for the HomePage page.\n\n See http://ionicframework.com/docs/v2/components/#navigation for more info on\n Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n  selector: 'page-userdangers',\n  templateUrl: 'userdangers.html'\n})\nexport class UserdangersPage {\n  // map id\n  public mapId = Math.random() + 'map';\n\n\n  // map height\n  public mapHeight: number = 480;\n\n  public listesutilisateurs : any;\n\n  public myid: any;\n\n  public valideur: any;\n\n  public status: any;\n\n  public imagesUsers: any;\n\n  public Imagechauffeur: any;\n\n  public myPosition:any;\n\n  // Map\n  public map: any;\n\n  // list vehicles\n\n  public hometest:any;\n\n  public nom: any;\n\n  public vehicles: any = [\n    {\n      name: 'Taxi',\n      icon: 'icon-taxi',\n      active: true\n    },\n    {\n      name: 'SUV',\n      icon: 'icon-car',\n      active: false\n    },\n    {\n      name: 'Car',\n      icon: 'icon-sedan',\n      active: false\n    }\n  ]\n\n  socket:any;\n  public listesutilisateursEnDangers: any;\n  public descriptionvehicules: any;\n  public imagesVehicule: any;\n\n  constructor(public nav: NavController, public navParams: NavParams, public trackingpoliceService: TrackingpoliceService, public alertCtrl: AlertController, public homeService: HomeService) {\n     this.myid = this.navParams.get('id');\n     this.status = this.navParams.get('status');     \n     this.chargementDeDonne();\n     this.hometest = 0;\n     this.imagesUsers = maconfig.imagesUsers;\n     this.imagesVehicule = maconfig.imagesVehicule;\n     this.Imagechauffeur = maconfig.Imagechauffeur;\n     this.socket = io(maconfig.socketadresse);\n     // en cas d'alerte alors la possibilité de chat s'impose a tous les utilisteur connecté\n     this.valideur = 0;\n     this.socket.on('alert', (msg) => {\n        if((msg.id_emetteur!= this.myid)&&(this.valideur == 0)){\n          this.participezAlaDiscussion();\n          this.valideur = 1;\n        }\n        \n     });  \n     \n  }\n\n  // toggle form\n \n  chargementDeDonne(){\n    this.trackingpoliceService.fingUserEnDanger().then( (resp) =>{\n        this.listesutilisateursEnDangers = resp;\n      }).catch( (error) =>{    \n         console.log()\n     });\n  }\n\n\n  allezchater(user){\n    /*this.nav.setRoot('ChatPage',{\n       id: this.myid,\n       status: this.status\n    });*/\n    \n    this.nav.setRoot('ChatPage',{\n      id: this.myid,\n      status: this.status,\n      user: user\n    });\n    \n  }\n\n  retour(){\n    this.hometest = 0;\n  }\n\n  details(user){\n\n     let body = {\n          \"utilisateurId\": user.id,\n      };\n\n     this.hometest = 1;\n\n     this.homeService.findClientByVehicule(body).then( (resp) =>{\n          this.descriptionvehicules = resp;\n      }).catch( (error) =>{    \n         console.log()\n     });\n\n  }\n\n  \n\n  mapdnager(){\n\n\n    this.hometest = 2;\n\n      let latLng = new google.maps.LatLng(48.8513735, 2.3861292);\n\n        let mapOptions = {\n          center: latLng,\n          zoom: 15,\n          mapTypeId: google.maps.MapTypeId.ROADMAP\n        }\n\n        this.map = new google.maps.Map(document.getElementById(this.mapId), mapOptions);    \n\n        var locations = [\n          ['Bondi Beach', -33.890542, 151.274856, 4],\n          ['Coogee Beach', -33.923036, 151.259052, 5],\n          ['Cronulla Beach', -34.028249, 151.157507, 3],\n          ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],\n          ['Maroubra Beach', -33.950198, 151.259302, 1]\n        ];\n\n        var infowindow = new google.maps.InfoWindow();\n\n        var marker, i;\n\n        for (i = 0; i < locations.length; i++) {  \n          marker = new google.maps.Marker({\n          position: new google.maps.LatLng(locations[i][1], locations[i][2]),\n          map: this.map\n          });\n\n          google.maps.event.addListener(marker, 'click', (function(marker, i) {\n            return function() {\n              infowindow.setContent(locations[i][0]);\n              infowindow.open(this.map, marker);\n            }\n          })(marker, i));\n        }\n        \n\n  }\n\n   participezAlaDiscussion(){\n\n    let alert2 = this.alertCtrl.create({\n          title: 'Alerte Rouge',\n          message: 'Vollez vous Paricipez à cette Recherche ?',\n          buttons: [\n            {\n              text: 'NON',\n              handler:() => {\n                this.valideur =1;\n                console.log('Cancel clicked');\n              }\n            },\n            {\n              text: 'OUI',\n              handler: () => {\n                alert2.dismiss().then(() => {\n                    //this.allezchater();\n                    this.chargementDeDonne();\n                });\n              }\n            }\n          ]\n        });\n\n      alert2.present();\n  }\n\n  selection(user){\n     this.nav.setRoot('TrackingpolicePage',{\n      id: this.myid,\n      status: this.status,\n      userdangers: user\n     });\n  }\n\n\n\n  // toggle active vehicle\n  toggleVehicle(index) {\n    for (var i = 0; i < this.vehicles.length; i++) {\n      this.vehicles[i].active = (i == index);\n    }\n  }\n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/userdangers/userdangers.ts"],"sourceRoot":""}